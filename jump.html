<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SiteHub - æ­£åœ¨è·³è½¬</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: white;
    }

    .container {
      text-align: center;
      padding: 40px 20px;
      max-width: 500px;
    }

    .logo {
      font-size: 64px;
      margin-bottom: 20px;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    h1 {
      font-size: 28px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .subtitle {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 30px;
    }

    .url-display {
      background: rgba(255, 255, 255, 0.2);
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      word-break: break-all;
      font-size: 14px;
      backdrop-filter: blur(10px);
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .error {
      background: rgba(255, 59, 48, 0.9);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .btn {
      display: inline-block;
      padding: 12px 30px;
      background: white;
      color: #667eea;
      text-decoration: none;
      border-radius: 25px;
      font-weight: 600;
      margin-top: 20px;
      transition: transform 0.2s;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 20px;
    }

    .progress-fill {
      height: 100%;
      background: white;
      width: 0%;
      animation: progress 2s ease-in-out;
    }

    @keyframes progress {
      to { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">ğŸš€</div>
    <h1 id="status">æ­£åœ¨è·³è½¬...</h1>
    <p class="subtitle" id="subtitle">è¯·ç¨å€™ï¼Œæ­£åœ¨ä¸ºæ‚¨æ‰“å¼€ç›®æ ‡ç½‘ç«™</p>

    <div class="spinner"></div>

    <div class="url-display" id="urlDisplay">
      å‡†å¤‡ä¸­...
    </div>

    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>

    <div id="errorMessage" style="display: none;"></div>
  </div>

  <script>
    // è·å–URLå‚æ•°
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    function showError(message) {
      document.getElementById('status').textContent = 'âŒ è·³è½¬å¤±è´¥';
      document.getElementById('subtitle').textContent = message;
      document.querySelector('.spinner').style.display = 'none';
      document.querySelector('.progress-bar').style.display = 'none';

      const errorDiv = document.getElementById('errorMessage');
      errorDiv.className = 'error';
      errorDiv.style.display = 'block';
      errorDiv.innerHTML = `
        <p style="margin-bottom: 10px;">æ— æ³•è‡ªåŠ¨è·³è½¬ï¼Œå¯èƒ½çš„åŸå› ï¼š</p>
        <ul style="text-align: left; padding-left: 20px;">
          <li>ç›®æ ‡ç½‘å€æ— æ•ˆ</li>
          <li>ç½‘ç«™ä¸å…è®¸ä»å…¶ä»–é¡µé¢è·³è½¬</li>
        </ul>
      `;
    }

    // éªŒè¯URL
    function isValidUrl(string) {
      try {
        const url = new URL(string);
        return url.protocol === 'http:' || url.protocol === 'https:';
      } catch (_) {
        return false;
      }
    }

    // ä¸»é€»è¾‘
    function main() {
      const targetUrl = getQueryParam('url');

      if (!targetUrl) {
        showError('ç¼ºå°‘ç›®æ ‡ç½‘å€å‚æ•°');
        return;
      }

      const decodedUrl = decodeURIComponent(targetUrl);

      if (!isValidUrl(decodedUrl)) {
        showError('ç›®æ ‡ç½‘å€æ ¼å¼ä¸æ­£ç¡®');
        document.getElementById('urlDisplay').textContent = decodedUrl;
        return;
      }

      // æ˜¾ç¤ºç›®æ ‡URL
      document.getElementById('urlDisplay').textContent = decodedUrl;

      // è®°å½•è·³è½¬æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
      console.log('ğŸš€ SiteHub Jump:', {
        target: decodedUrl,
        referrer: document.referrer,
        timestamp: new Date().toISOString()
      });

      // å»¶è¿Ÿè·³è½¬ï¼ˆç»™ç”¨æˆ·çœ‹åˆ°åŠ è½½åŠ¨ç”»ï¼‰
      setTimeout(() => {
        try {
          // æ–¹å¼1ï¼šç›´æ¥è·³è½¬ï¼ˆä¼˜å…ˆï¼‰
          window.location.href = decodedUrl;

          // æ–¹å¼2ï¼šå¦‚æœ3ç§’åè¿˜æ²¡è·³è½¬ï¼Œæä¾›æ‰‹åŠ¨é“¾æ¥
          setTimeout(() => {
            document.getElementById('status').textContent = 'â° è‡ªåŠ¨è·³è½¬å¤±è´¥';
            document.getElementById('subtitle').innerHTML = `è¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰‹åŠ¨æ‰“å¼€`;
            document.querySelector('.spinner').style.display = 'none';

            const linkBtn = document.createElement('a');
            linkBtn.href = decodedUrl;
            linkBtn.className = 'btn';
            linkBtn.textContent = 'ç‚¹å‡»è¿™é‡Œæ‰“å¼€ç½‘ç«™';
            linkBtn.target = '_blank';
            document.querySelector('.container').appendChild(linkBtn);
          }, 3000);

        } catch (error) {
          console.error('è·³è½¬å¤±è´¥:', error);
          showError('è·³è½¬è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯');
        }
      }, 500); // 500mså»¶è¿Ÿï¼Œè®©ç”¨æˆ·çœ‹åˆ°è·³è½¬åŠ¨ç”»
    }

    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', main);
    } else {
      main();
    }
  </script>
</body>
</html>
